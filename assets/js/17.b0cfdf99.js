(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{118:function(t,e,i){t.exports=i.p+"assets/img/rs232_jumpers.aa5b21af.jpg"},259:function(t,e,i){"use strict";i.r(e);var s=[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"configuration-v1-10-0-or-later"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#configuration-v1-10-0-or-later"}},[this._v("#")]),this._v(" Configuration - "),e("code",[this._v("v1.10.0")]),this._v(" or later")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("As of October 2022 kits ship with firmware "),e("code",[this._v("v1.10.0")]),this._v(" or later.\nThe following configuration guide relates to these firmware versions.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"overview"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#overview"}},[this._v("#")]),this._v(" Overview")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"warning custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("WARNING")]),this._v(" "),e("p",[this._v("Just like the real IMSAI 8080 computer, the default configuration of your kit is an empty machine. While you "),e("em",[this._v("can")]),this._v(" enter instructions using the toggle switches (and you "),e("em",[this._v("should")]),this._v(" experiment with this sometime) it's more interesting to run some real software.\nThe default configuration is like an empty machine with no ROM only RAM.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"getting-connected"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#getting-connected"}},[this._v("#")]),this._v(" Getting connected")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",[i("li",[t._v("Plug in the power to the IMSAI 8080esp kit.")]),t._v(" "),i("li",[t._v("On your computer, open the Wi-Fi settings and select the "),i("code",[t._v("imsai8080")]),t._v(" network (SSID).")]),t._v(" "),i("li",[t._v("When prompted for a password, enter "),i("code",[t._v("password")]),t._v(".")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",[i("li",[t._v("If you have a Mac, open your browser and enter "),i("code",[t._v("imsai8080")]),t._v(" or "),i("code",[t._v("imsai8080.local")]),t._v(" as the web address.")]),t._v(" "),i("li",[t._v("If you have a PC, open your browser and enter "),i("code",[t._v("imsai8080")]),t._v(" or "),i("code",[t._v("192.168.4.1")]),t._v(" as the address.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"default-configuration"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#default-configuration"}},[this._v("#")]),this._v(" Default configuration")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"imsai-8080-guest"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#imsai-8080-guest"}},[this._v("#")]),this._v(" IMSAI 8080 (guest)")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"warning custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("WARNING")]),this._v(" "),e("p",[this._v("The default configuration is like an empty machine with no ROM only RAM.")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",[i("li",[t._v("RAM is 64K occupying the entire address space from "),i("code",[t._v("0000h")]),t._v(" to "),i("code",[t._v("FFFFh")])]),t._v(" "),i("li",[t._v("CPU is Intel 8080 @ 2MHz with support for undocumented op-codes")]),t._v(" "),i("li",[t._v("No boot ROM is active by default")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"esp32-host"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#esp32-host"}},[this._v("#")]),this._v(" ESP32 (host)")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",[i("li",[t._v("Wi-Fi set to "),i("strong",[t._v("Access-Point (AP)")]),t._v(" mode with the default SSID of "),i("code",[t._v("imsai8080")]),t._v(", password of "),i("code",[t._v("password")])]),t._v(" "),i("li",[t._v("Hostname (HOSTNAME environment variable) set to "),i("code",[t._v("imsai8080")]),t._v(" ("),i("code",[t._v("imsai8080.local")]),t._v(" for mDNS)")]),t._v(" "),i("li",[t._v("Port (PORT environment variable) set to "),i("code",[t._v("80")])]),t._v(" "),i("li",[t._v("Timezone (TZ environment variable) set for AEST+10, ADST+11 (ie. Sydney, Australia)")]),t._v(" "),i("li",[t._v("Time server (NTP_SERVER environment variable) set to "),i("code",[t._v("pool.ntp.org")])]),t._v(" "),i("li",[t._v("POST (Power On Self Test) disabled")]),t._v(" "),i("li",[t._v("Console log level set to "),i("code",[t._v("NONE")]),t._v(" (details to follow)")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("TIP")]),this._v(" "),e("p",[this._v("Once you are connected to the Wi-Fi network, start a Chrome browser and enter the URL "),e("code",[this._v("http://imsai8080")]),this._v(" to see the Desktop UI.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"startup-configuration-non-volatile-storage-nvs"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#startup-configuration-non-volatile-storage-nvs"}},[this._v("#")]),this._v(" Startup configuration (Non-Volatile Storage, NVS)")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("To enter "),e("em",[this._v("startup configuration mode")]),this._v(", follow the sequence:")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ol",[i("li",[t._v("ensure the ESP32 is connected to a USB power source, the red LED on the ESP32 board should be illuminated")]),t._v(" "),i("li",[t._v("turn the front panel power switch "),i("strong",[t._v("off")]),t._v(", "),i("code",[t._v("PWR OFF")]),t._v(", the down position")]),t._v(" "),i("li",[t._v("hold the "),i("code",[t._v("EXAMINE")]),t._v(" toggle in the "),i("strong",[t._v("Examine")]),t._v(", up position")]),t._v(" "),i("li",[t._v("press and release the "),i("code",[t._v("Reset")]),t._v(" switch while holding the "),i("code",[t._v("EXAMINE")]),t._v(" toggle up")]),t._v(" "),i("li",[t._v("hold the "),i("code",[t._v("EXAMINE")]),t._v(" toggle for a second or two")]),t._v(" "),i("li",[t._v("release the "),i("code",[t._v("EXAMINE")]),t._v(" toggle")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tip custom-block"},[i("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),i("p",[t._v("There are 2 "),i("code",[t._v("Reset")]),t._v(" switches available that both do the same thing:")]),t._v(" "),i("ul",[i("li",[t._v("The "),i("code",[t._v("Tactile Switch SPST-NO")]),t._v(" you installed in the "),i("code",[t._v("Reset")]),t._v(" position on the PCB")]),t._v(" "),i("li",[t._v("The small tactile switch on the ESP32 board marked "),i("code",[t._v("EN")])]),t._v(" "),i("li",[i("strong",[t._v("NOT")]),t._v(" the "),i("em",[t._v("blue toggle switch")]),t._v(" on the front panel")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",[t._v("The IMSAI 8080esp should now be in "),i("em",[t._v("startup configuration mode")]),t._v(". This is indicted by a running LED pattern (right to left) on the 4 LEDS at the right hand side of the front panel ("),i("code",[t._v("HOLD")]),t._v(", "),i("code",[t._v("WAIT")]),t._v(", "),i("code",[t._v("RUN")]),t._v(", "),i("code",[t._v("INTERRUPTS ENABLED")]),t._v(").")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("TIP")]),this._v(" "),e("p",[this._v("The current "),e("em",[this._v("startup configuration value")]),this._v(" is displayed on the Address Bus LEDs (bits 0-15) when you enter "),e("em",[this._v("startup configuration mode")]),this._v(".")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("TIP")]),this._v(" "),e("p",[this._v("The whole procedure, including entering a value to boot into CP/M 2.2 (see below) is demonstrated in this "),e("em",[this._v("Kit Assembly")]),this._v(" video\n"),this._v(" "),e("iframe",{attrs:{width:"560",height:"315",src:"https://www.youtube.com/embed/Cwv_gRtWnZM?start=200",frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}})])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"warning custom-block"},[i("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),i("p",[t._v("When you "),i("strong",[t._v("Deposit")]),t._v(" a new "),i("em",[t._v("startup configuration value")]),t._v(", all the bits of the current value are overwritten. If your objective is to "),i("strong",[t._v("modify")]),t._v(" the existing value changing only a few of the bits, you must toggle in all the bits of the existing value indicated by the Address Bus LEDs and then switch the bits you want to configure differently, before you "),i("strong",[t._v("Deposit")]),t._v(" this new value.")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tip custom-block"},[i("p",{staticClass:"custom-block-title"},[t._v("Booting into XYBASIC")]),t._v(" "),i("p",[t._v("To configure the IMSAI 8080esp to boot directly into a ROM based "),i("em",[t._v("XYBASIC")]),t._v(" in Z80 mode @ 4 MHz, the following startup configuration value can be used.")]),t._v(" "),i("ul",[i("li",[t._v("Binary: 0000 0100 0101 0000")]),t._v(" "),i("li",[t._v("Octal: 002120")]),t._v(" "),i("li",[t._v("Hexadecimal: 0450")])]),t._v(" "),i("ol",[i("li",[t._v("Enter "),i("em",[t._v("startup configuration mode")]),t._v(" (above)")]),t._v(" "),i("li",[t._v("Toggle in this value on the "),i("strong",[t._v("Address")]),t._v(" toggle switches")]),t._v(" "),i("li",[t._v("Raise the "),i("code",[t._v("DEPOSIT")]),t._v(" toggle to the "),i("strong",[t._v("Deposit")]),t._v(", up position to store the entered startup configuration value.")]),t._v(" "),i("li",[t._v("Reboot the IMSAI 8080esp by pressing a "),i("code",[t._v("Reset")]),t._v(" switch")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tip custom-block"},[i("p",{staticClass:"custom-block-title"},[t._v("Booting into CP/M 2.2")]),t._v(" "),i("p",[t._v("To configure the IMSAI 8080esp to boot from the disk image in drive "),i("code",[t._v("DSK:A:")]),t._v(" in Z80 mode @ 4 MHz, the following startup configuration value can be used. You can mount the "),i("code",[t._v("cpm_22.dsk")]),t._v(" disk image in drive "),i("code",[t._v("DSK:A:")]),t._v(" via the "),i("em",[t._v("Desktop UI")]),t._v(".")]),t._v(" "),i("ul",[i("li",[t._v("Binary: 0000 1001 0101 0000")]),t._v(" "),i("li",[t._v("Octal: 004520")]),t._v(" "),i("li",[t._v("Hexadecimal: 0950")])]),t._v(" "),i("ol",[i("li",[t._v("Enter "),i("em",[t._v("startup configuration mode")]),t._v(" (above)")]),t._v(" "),i("li",[t._v("Toggle in this value on the "),i("strong",[t._v("Address")]),t._v(" toggle switches")]),t._v(" "),i("li",[t._v("Raise the "),i("code",[t._v("DEPOSIT")]),t._v(" toggle to the "),i("strong",[t._v("Deposit")]),t._v(", up position to store the entered startup configuration value.")]),t._v(" "),i("li",[t._v("Reboot the IMSAI 8080esp by pressing a "),i("code",[t._v("Reset")]),t._v(" switch")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("table",[i("thead",[i("tr",[i("th",{staticStyle:{"text-align":"right"}},[t._v("Address Bit")]),t._v(" "),i("th",[t._v("Name")]),t._v(" "),i("th",[t._v("Equivalent Flag")]),t._v(" "),i("th",[t._v("Description")])])]),t._v(" "),i("tbody",[i("tr",[i("td",{staticStyle:{"text-align":"right"}},[t._v("0")]),t._v(" "),i("td",[t._v("NVS_POST")]),t._v(" "),i("td",[t._v("n/a")]),t._v(" "),i("td",[t._v("Enable Power On Self Test (POST)")])]),t._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"right"}},[t._v("1-2")]),t._v(" "),i("td",[t._v("NVS_LOG_LEVEL")]),t._v(" "),i("td",[t._v("n/a")]),t._v(" "),i("td",[t._v("Set ESP32 console "),i("strong",[t._v("Log Level")]),t._v(", 0 = NONE; 1 = ERROR; 2 = WARN; 3 = INFO")])]),t._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"right"}},[t._v("3")]),t._v(" "),i("td",[t._v("NVS_IF_STA")]),t._v(" "),i("td",[t._v("n/a")]),t._v(" "),i("td",[t._v("Set Wi-Fi Mode,  0 = Access Point Mode (AP); 1 = Station Mode (STA)")])]),t._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"right"}},[t._v("4")]),t._v(" "),i("td",[t._v("NVS_Z80")]),t._v(" "),i("td",[i("code",[t._v("-z")]),t._v(", "),i("code",[t._v("-8")])]),t._v(" "),i("td",[t._v("Enable Z80 CPU emulation, 0 = 8080 "),i("code",[t._v("-8")]),t._v("; 1 = Z80 "),i("code",[t._v("-z")])])]),t._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"right"}},[t._v("5")]),t._v(" "),i("td",[t._v("NVS_NO_UNDOC")]),t._v(" "),i("td",[i("code",[t._v("-u")])]),t._v(" "),i("td",[t._v("Suppress support for undocumented op. codes, 1 = "),i("code",[t._v("-u")])])]),t._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"right"}},[t._v("6")]),t._v(" "),i("td",[t._v("NVS_4MHZ")]),t._v(" "),i("td",[i("code",[t._v("-f")])]),t._v(" "),i("td",[t._v("Set CPU speed, 0 = 2 MHz "),i("code",[t._v("-f 2")]),t._v("; 1 = 4 MHz "),i("code",[t._v("-f 4")])])]),t._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"right"}},[t._v("7")]),t._v(" "),i("td",[t._v("NVS_UNLIMITED")]),t._v(" "),i("td",[i("code",[t._v("-f 0")])]),t._v(" "),i("td",[t._v("Set CPU speed to Unlimited, 0 = use speed from bit 6; 1 = Unlimited "),i("code",[t._v("-f 0")])])]),t._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"right"}},[t._v("8-10")]),t._v(" "),i("td",[t._v("NVS_MEMORY_MAP")]),t._v(" "),i("td",[i("code",[t._v("-M")])]),t._v(" "),i("td",[t._v("Set memory map, 0 = default 64K RAM, 1-7 = use memory map "),i("em",[t._v("n")]),t._v(" "),i("code",[t._v("-M n")])])]),t._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"right"}},[t._v("11")]),t._v(" "),i("td",[t._v("NVS_BANK_ROM")]),t._v(" "),i("td",[i("code",[t._v("-R")])]),t._v(" "),i("td",[t._v("Enable "),i("strong",[t._v("MPU-B(A)")]),t._v(" style Banked ROM/RAM functionality, 1 = "),i("code",[t._v("-r")]),t._v(". Only compatible with MPU-A ROM images.")])]),t._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"right"}},[t._v("12-14")]),t._v(" "),i("td"),t._v(" "),i("td"),t._v(" "),i("td",[t._v("Reserved for future use")])]),t._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"right"}},[t._v("15")]),t._v(" "),i("td",[t._v("NVS_AUTO_RUN")]),t._v(" "),i("td"),t._v(" "),i("td",[t._v("Autorun - The CPU will automatically run when the machine is switched on ("),i("code",[t._v("PWR ON")]),t._v(")")])])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ol",[i("li",[t._v("To "),i("strong",[t._v("set")]),t._v(" a bit, put the corresponding "),i("strong",[t._v("Address")]),t._v(" toggle switch in the "),i("strong",[t._v("up")]),t._v(" position.")]),t._v(" "),i("li",[t._v("To "),i("strong",[t._v("clear")]),t._v(" a bit, put the corresponding "),i("strong",[t._v("Address")]),t._v(" toggle switch in the "),i("strong",[t._v("down")]),t._v(" position.")]),t._v(" "),i("li",[t._v("Raise the "),i("code",[t._v("DEPOSIT")]),t._v(" toggle to the "),i("strong",[t._v("Deposit")]),t._v(", up position to store the entered startup configuration value.")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"warning custom-block"},[i("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),i("p",[t._v("The IMSAI 8080esp must be rebooted for the new configuration to take effect.")]),t._v(" "),i("p",[t._v("This can be done by raising the "),i("code",[t._v("RESET")]),t._v(" toggle or by pressing a "),i("code",[t._v("Reset")]),t._v(" switch.")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tip custom-block"},[i("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),i("p",[t._v("For further details about the "),i("em",[t._v("Equivalent Flag")]),t._v(" refer to the "),i("strong",[t._v("Z80PACK")]),t._v(" documentation for the "),i("strong",[t._v("imsaisim")]),t._v(" machine.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"serial-communications-rs232-usb"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#serial-communications-rs232-usb"}},[this._v("#")]),this._v(" Serial Communications (RS232, USB)")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The "),e("strong",[this._v("IMSAI 8080esp")]),this._v(" is configured with two "),e("em",[this._v("virtual")]),this._v(" "),e("strong",[this._v("IMSAI SIO-2")]),this._v(" UART boards.")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("table",[i("thead",[i("tr",[i("th",{staticStyle:{"text-align":"center"}},[t._v("SIO Board")]),t._v(" "),i("th",{staticStyle:{"text-align":"center"}},[t._v("UART Port")]),t._v(" "),i("th",[t._v("I/O ports (decimal)")]),t._v(" "),i("th",[t._v("Connected Device")]),t._v(" "),i("th",[t._v("CP/M 2.2 Device via BIOS")])])]),t._v(" "),i("tbody",[i("tr",[i("td",{staticStyle:{"text-align":"center"}},[t._v("#1")]),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[t._v("A (SIO1)")]),t._v(" "),i("td",[t._v("2 (data), 3 (status)")]),t._v(" "),i("td",[t._v("Physical "),i("strong",[t._v("UART0")]),t._v(" (Tx/Rx Patch pins & USB)")]),t._v(" "),i("td",[t._v("TTY:")])]),t._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"center"}}),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[t._v("B")]),t._v(" "),i("td",[t._v("4 (data), 5 (status)")]),t._v(" "),i("td",[t._v("Virtual VIO keyboard")]),t._v(" "),i("td",[t._v("CRT: (input only, no output)")])]),t._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"center"}},[t._v("#2")]),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[t._v("A (SIO2)")]),t._v(" "),i("td",[t._v("34 (data), 35 (status)")]),t._v(" "),i("td",[t._v("Physical "),i("strong",[t._v("UART1")]),t._v(" (IO22/IO5 Patch pins)")]),t._v(" "),i("td",[t._v("UC1: (default)")])]),t._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"center"}}),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[t._v("B")]),t._v(" "),i("td",[t._v("36 (data), 37 (status)")]),t._v(" "),i("td",[t._v("Virtual 'AT' Hayes modem")]),t._v(" "),i("td",[t._v("(assignable as UC1:)")])])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",[t._v("When the machine boots, the "),i("em",[t._v("virtual")]),t._v(" "),i("strong",[t._v("SIO1")]),t._v(" UART (board #1 port A) is routed to the "),i("em",[t._v("physical")]),t._v(" "),i("strong",[t._v("UART0")]),t._v(" on the "),i("code",[t._v("ESP32-PICO-KIT")]),t._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("This enables you to use any software on the IMSAI 8080 that communicates via this UART on the SIO (namely the CP/M TTY: as console) using a terminal or terminal emulator depending your method of connection.")]),this._v(" "),e("li",[this._v("The default speed with the current firmware is 115200 baud @ 8N1")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tip custom-block"},[i("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),i("p",[t._v("Both the "),i("em",[t._v("ESP32 console log")]),t._v(" and the IMSAI 8080 "),i("strong",[t._v("SIO1")]),t._v(" (TTY:) will be directed to the serial "),i("strong",[t._v("UART0")]),t._v(". If you set the "),i("code",[t._v("NVS_LOG_LEVEL")]),t._v(" to "),i("code",[t._v("INFO")]),t._v(" (3) this will likely send console log messages during normal use of the machine. It is recommended to set the "),i("code",[t._v("NVS_LOG_LEVEL")]),t._v(" to a lower level during normal operation.")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"warning custom-block"},[i("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),i("p",[t._v("If you start the "),i("strong",[t._v("Desktop UI")]),t._v(" from a web browser and the "),i("em",[t._v("TTY: virtual device")]),t._v(" is connected (default behavior) then the "),i("em",[t._v("virtual")]),t._v("* SIO1 UART (TTY:) is disconnected from the "),i("em",[t._v("physical")]),t._v(" UART0 on the "),i("code",[t._v("ESP32-PICO-KIT")]),t._v(" and instead re-routed to the "),i("em",[t._v("TTY: virtual device")]),t._v(" on the Desktop UI. If the "),i("em",[t._v("TTY: virtual device")]),t._v(" is disconnected, then the SIO1 UART is re-routed back to the UART0 on the "),i("code",[t._v("ESP32-PICO-KIT")]),t._v(", ie. only one of these two destinations can be connected at a time.")]),t._v(" "),i("p",[i("strong",[t._v("Note: the "),i("em",[t._v("ESP32 console log")]),t._v(" is always sent to the physical UART0 and is never redirected.")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"serial-uart-over-usb"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#serial-uart-over-usb"}},[this._v("#")]),this._v(" Serial UART over USB")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The "),e("code",[this._v("ESP32-PICO-KIT")]),this._v(" supports serial communications from UART0 over USB. It uses a "),e("em",[this._v("Silicon Labs CP210x USB to UART bridge")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ol",[i("li",[t._v("connect the "),i("code",[t._v("ESPP32-PICO-KIT")]),t._v(" to a PC using a suitable USB cable")]),t._v(" "),i("li",[t._v("start a terminal emulator on the PC set for 115200 baud 8N1 connected to the serial device your OS identifies the "),i("code",[t._v("ESP32-PICO-KIT")]),t._v(" on\n"),i("ul",[i("li",[t._v("Windows will be a COMx: port")]),t._v(" "),i("li",[t._v("OSX will be /dev/tty.SLAB_USBtoUART")]),t._v(" "),i("li",[t._v("Linux will be /dev/ttyUSB0 (or similar, TBA)")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("If you do not see a TTY/COM port on your PC presented by the ESP32-PICO-KIT when connected, you may need to install a driver for the "),e("em",[this._v("Silicon Labs CP210x USB to UART bridge")]),this._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"serial-uart-over-rs232"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#serial-uart-over-rs232"}},[this._v("#")]),this._v(" Serial UART over RS232")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"warning custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("WARNING")]),this._v(" "),e("p",[e("em",[this._v("Serial UART0 over RS232")]),this._v(" and "),e("em",[this._v("Serial UART0 over USB")]),this._v(" are mutually exclusive, ie. they cannot be used at the same time.")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",[i("em",[t._v("Serial UART over RS232")]),t._v(" is configured by using the supplied jumpers/shunts to bridge the required pins on the "),i("code",[t._v("Patch")]),t._v(" and "),i("code",[t._v("Comms")]),t._v(" headers accessible on the rear of the PCB, and connecting a suitable RS232 device to one of the DE-9M connectors labeled "),i("code",[t._v("RS232-1")]),t._v(" and "),i("code",[t._v("RS232-2")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",[t._v("You must position 4 of the jumpers/shunts provided to enable a "),i("em",[t._v("Serial UART over RS232")]),t._v(". This image shows the currently supported configuration for the jumpers/shunts on both the "),i("code",[t._v("Patch")]),t._v(" and "),i("code",[t._v("Comms")]),t._v(" headers for "),i("strong",[t._v("UART0")]),t._v(" to "),i("code",[t._v("RS232-1")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:i(118),alt:"Patch & Comms jumpers"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"uart0-to-rs232-1"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#uart0-to-rs232-1"}},[this._v("#")]),this._v(" UART0 to RS232-1")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{attrs:{id:"patch-header"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#patch-header"}},[this._v("#")]),this._v(" Patch header")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("bridge Tx - T1 - vertical "),e("em",[this._v("position second from right")])]),this._v(" "),e("li",[this._v("bridge Rx - R1 - vertical "),e("em",[this._v("right most position")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{attrs:{id:"comms-header"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#comms-header"}},[this._v("#")]),this._v(" Comms header")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("bridge @ Tx1 - horizontal "),e("em",[this._v("second position from top")])]),this._v(" "),e("li",[this._v("bridge @ Rx1 - horizontal "),e("em",[this._v("fourth position from top")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"uart1-to-rs232-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#uart1-to-rs232-2"}},[this._v("#")]),this._v(" UART1 to RS232-2")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{attrs:{id:"patch-header-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#patch-header-2"}},[this._v("#")]),this._v(" Patch header")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("bridge IO22 - T2 - vertical "),e("em",[this._v("position third from right")])]),this._v(" "),e("li",[this._v("bridge IO5  - R2 - vertical "),e("em",[this._v("position fourth from right")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{attrs:{id:"comms-header-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#comms-header-2"}},[this._v("#")]),this._v(" Comms header")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("bridge @ Tx2 - horizontal "),e("em",[this._v("third position from bottom")])]),this._v(" "),e("li",[this._v("bridge @ Rx2 - horizontal "),e("em",[this._v("last position at bottom")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"configuring-physical-uart-parameters-speed-data-stop-bits"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#configuring-physical-uart-parameters-speed-data-stop-bits"}},[this._v("#")]),this._v(" Configuring physical UART parameters (speed, data & stop bits)")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",[t._v("You can configure the parameters for both "),i("strong",[t._v("UART0")]),t._v(" ("),i("code",[t._v("RS232-1")]),t._v("/USB) and "),i("strong",[t._v("UART1")]),t._v(" ("),i("code",[t._v("RS232-2")]),t._v(") via the "),i("code",[t._v("boot.conf")]),t._v(" file.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"wi-fi-communications"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#wi-fi-communications"}},[this._v("#")]),this._v(" Wi-Fi Communications")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",[t._v("The ESP32 has on-board Wi-Fi and can boot in either "),i("strong",[t._v("Access Point")]),t._v(" (AP) or "),i("strong",[t._v("Station")]),t._v(" (STA) mode. The mode is determined by the "),i("strong",[t._v("NVS_IF_STA")]),t._v(" bit in the "),i("em",[t._v("startup configuration")]),t._v(" stored in NVS and described "),i("a",{attrs:{href:"#startup-configuration-non-volatile-storage-nvs"}},[t._v("above")]),t._v(".")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",[i("li",[t._v("In AP mode, the ESP32 acts as an Access Point and broadcasts a system defined SSID and provides DHCP services for clients to connect\n"),i("ul",[i("li",[t._v("The "),i("strong",[t._v("SSID")]),t._v(" hardcoded in the firmware is "),i("em",[t._v("imsai")]),t._v(" with a "),i("strong",[t._v("password")]),t._v(" of "),i("em",[t._v("password")]),t._v(", this will only be used if the "),i("strong",[t._v("boot.conf")]),t._v(" file on the microSD card cannot be read or does not include a "),i("code",[t._v("HOSTNAME=name")]),t._v(" statement, see "),i("a",{attrs:{href:"#boot-conf-file"}},[t._v("Boot.conf file")]),t._v(" below.")]),t._v(" "),i("li",[t._v("If a "),i("code",[t._v("HOSTNAME=name")]),t._v(" statement is found in the "),i("strong",[t._v("boot.conf")]),t._v(" file, then this hostname is also used as the "),i("strong",[t._v("SSID")]),t._v(" in AP mode. In this case, the "),i("strong",[t._v("password")]),t._v(" still remains "),i("em",[t._v("password")])])])]),t._v(" "),i("li",[t._v("In STA mode, the ESP32 acts as a Wi-Fi station or client and can join an existing Wi-Fi network (supporting WPA or WPA2, but not Enterprise WPA).\n"),i("ul",[i("li",[t._v("The "),i("strong",[t._v("SSID")]),t._v(" and "),i("strong",[t._v("password")]),t._v(" of the desired Wi-Fi network must be configured in the "),i("strong",[t._v("boot.conf")]),t._v(" file using the "),i("code",[t._v("SSID=name")]),t._v(" and "),i("code",[t._v("PASSWORD=password")]),t._v(" statements, see "),i("a",{attrs:{href:"#boot-conf-file"}},[t._v("Boot.conf file")]),t._v(" below.")])])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tip custom-block"},[i("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),i("p",[t._v("The "),i("strong",[t._v("boot.conf")]),t._v(" file can be edited via the "),i("strong",[t._v("SYS:")]),t._v(" virtual system device in the Desktop UI while connected to the IMSAI 8080esp running in AP mode.\nAlternatively the "),i("strong",[t._v("microSD Card")]),t._v(" can be mounted in a PC and the "),i("code",[t._v("/imsai/conf/boot.conf")]),t._v(" file edited directly in a text editor then the "),i("strong",[t._v("microSD Card")]),t._v(" returned to the IMSAI 8080esp before it is powered on.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"warning custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("WARNING")]),this._v(" "),e("p",[this._v("When the IMSAI 8080esp is configured to work in station mode (STA) but it is unable to make a connection to the configured Wi-Fi network within 30 seconds, the ESP32 will reboot and temporarily start in AP mode.")]),this._v(" "),e("ul",[e("li",[this._v("This enables you to connect to the IMSAI 8080esp from a browser on the advertised SSID and modify/correct the STA mode Wi-Fi configuration.")]),this._v(" "),e("li",[this._v("The simplest way to determine if this has happed is to look for the AP mode SSID being broadcast, or to look at the ESP32 console log output on the UART.")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"danger custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("WARNING")]),this._v(" "),e("p",[this._v("The design of the IMSAI 8080esp is intended for only "),e("strong",[this._v("one")]),this._v(" Wi-Fi client (browser)to be connected at any given time. It is untested and not recommended to connect multiple clients at the same time.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"boot-conf-file"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#boot-conf-file"}},[this._v("#")]),this._v(" Boot.conf file")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The "),e("strong",[this._v("boot.conf")]),this._v(" file is located on the microSD card with the path "),e("code",[this._v("/imsai/conf/boot.conf")]),this._v("\nAs the ESP32 boots this file is loaded, each line parsed and the "),e("strong",[this._v("variable=value")]),this._v(" pair is added to the environment (like posix environment variables).")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"danger custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("WARNING")]),this._v(" "),e("p",[this._v("There is little to no error checking done at the moment. If you significantly change this file and remove a variable, or leave a value blank you may cause the boot process to fail. I know I've managed to do that once or twice.")]),this._v(" "),e("p",[this._v("The solution is to mount the microSD card on a PC and edit the "),e("strong",[this._v("boot.conf")]),this._v(" file to fix the problem.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"default-boot-conf"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#default-boot-conf"}},[this._v("#")]),this._v(" Default boot.conf")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-conf extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("### Network configuration\nNTP_SERVER=pool.ntp.org\nTZ=AEST-10AEDT,M10.1.0,M4.1.0\nHOSTNAME=imsai8080\nPORT=80\nSSID=mySSID\nPASSWORD=myPASSWORD\nWIFI.sta.scan=1\n#WIFI.password.hide=1\n### UART configuration\n#UART0=115200,cs8\n#UART1=115200,cs8\n### Performance parameters\n#TTY.netsrv.buffer_delay=33\n#LPT.netsrv.buffer_delay=33\n### Harddisk image\nHARDDISK=hd-ws4\n### SIO-2 default port mappings (HAL)\n#SIO1.portA.device=WEBTTY,UART0\n#SIO1.portB.device=VIOKBD\n#SIO2.portA.device=WEBPTR,UART1\n#SIO2.portB.device=MODEM\n### Modem initialization string. Example:\n#MODEM.init=ATS0=1S15=1&A1 #S0=1 auto-answer after 1 ring, S15=1 enable telnet protocol\nMODEM.init=ATS15=1 #S15=1 enable telnet protocol\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"network-configuration"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#network-configuration"}},[this._v("#")]),this._v(" Network Configuration")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The "),e("em",[this._v("Network configuration")]),this._v(" entries should be familiar and mostly self explanatory.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The TZ variable cannot use values like "),e("em",[this._v("Sydney/Australia")]),this._v(" (Olson format) but must use explicitly defined timezone strings (POSIX format) eg. "),e("code",[this._v("TZ=AEST-10AEDT,M10.1.0,M4.1.0")]),this._v(" which is correct for Sydney, Australia.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"uart-configuration"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#uart-configuration"}},[this._v("#")]),this._v(" UART Configuration")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The "),e("em",[this._v("UART configuration")]),this._v(" entries define the speed, data & stop bits for the two physical UARTs on the ESP32, "),e("strong",[this._v("UART0")]),this._v(" and "),e("strong",[this._v("UART1")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-conf extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("### UART configuration\nUART0=115200,cs8 # ie. 115200, 8N1 - not required because this is default\nUART1=9600 cs7 cstopb parenb parodd # ie. 9600, 7O2\n")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",[i("li",[t._v("parameters can be separated by "),i("em",[t._v("spaces")]),t._v(" or "),i("em",[t._v("commas")])]),t._v(" "),i("li",[t._v("parameters are "),i("em",[t._v("case insensitive")])]),t._v(" "),i("li",[t._v("parameters follow the convention used by the "),i("code",[t._v("screen")]),t._v(" program under "),i("em",[t._v("unix/linux/gnu")]),t._v(" ie.:\n"),i("ul",[i("li",[t._v("default is "),i("code",[t._v("115200,cs8")]),t._v(" in other words 115200 8N1")]),t._v(" "),i("li",[t._v("standard baud rates from "),i("code",[t._v("110")]),t._v(" to "),i("code",[t._v("230400")]),t._v(" e.g. 110, 300, 1200, 2400, 4800, 9600, 19200, 38400, 57600, 115200, 230400 others may work, but you'll have to experiment")]),t._v(" "),i("li",[i("code",[t._v("cs7")]),t._v(" - for 7 data bits")]),t._v(" "),i("li",[i("code",[t._v("cs8")]),t._v(" - for 8 data bits")]),t._v(" "),i("li",[i("code",[t._v("cstopb")]),t._v(" - for 2 stop bits, default is 1")]),t._v(" "),i("li",[i("code",[t._v("parenb")]),t._v(" - for even parity, default is none")]),t._v(" "),i("li",[i("code",[t._v("parenb,parodd")]),t._v(" - for odd parity")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"performance-parameters"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#performance-parameters"}},[this._v("#")]),this._v(" Performance parameters")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",[t._v("The "),i("em",[t._v("Performance parameters")]),t._v(" exist only for the two devices "),i("code",[t._v("TTY:")]),t._v(" (default: SIO1A) and "),i("code",[t._v("LPT:")]),t._v(" and apply only to websocket communication to the "),i("em",[t._v("Desktop UI")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-conf extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("### Performance parameters\nTTY.netsrv.buffer_delay=33\nLPT.netsrv.buffer_delay=33\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"harddisk-image"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#harddisk-image"}},[this._v("#")]),this._v(" Harddisk image")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The current harddisk image is visible on the desktop as "),e("code",[this._v("I:DSK:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Harddisk images are visible in the disk library "),e("code",[this._v("LIB:")]),this._v(" and indicated with a "),e("em",[this._v("harddisk")]),this._v(" icon. You can drag-and-drop a new harddisk onto the "),e("code",[this._v("LIB:")]),this._v(" window to upload a new harddisk image.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The harddisk function is inactive unless you include the following line in "),e("code",[this._v("boot.conf")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-conf extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("HARDDISK=imagename\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-conf extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("### Harddisk image (don't include the .hdd extension)\nHARDDISK=hd-ws4\n")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",[t._v("The harddisk image file must reside in "),i("code",[t._v("/imsai/disks/")]),t._v(" and end with "),i("code",[t._v(".hdd")]),t._v(" eg. "),i("code",[t._v("/imsai/disks/hd-ws4.hdd")]),t._v("\nDo not use the "),i("code",[t._v(".dsk")]),t._v(" extension for a harddisk image as it will be confused with a floppy disk image")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("TIP")]),this._v(" "),e("p",[this._v("If you change harddisk image you must "),e("strong",[this._v("reboot")]),this._v(" the IMSAI8080esp to load the new image")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"warning custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("WARNING")]),this._v(" "),e("p",[this._v("There is no UI for changing hard disk images, the required image must be set using the environment variable "),e("code",[this._v("HARDDISK")]),this._v(" in the "),e("code",[this._v("boot.conf")]),this._v(" file and then the ESP32 hard reset to reload the environment.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"sio-2-port-mappings"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#sio-2-port-mappings"}},[this._v("#")]),this._v(" SIO-2 port mappings")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("the SIO port mapping configuration is loaded and reported to the debug console (UART0/USB) when the IMSAI8080esp is started/powered-on")]),this._v(" "),e("li",[this._v("the SIO port mapping configuration is also displayed in the SYS: virtual device on the desktop UI")]),this._v(" "),e("li",[this._v("when no SIO port mapping configuration is specified, a stanard configuration is the default, and reported as follows:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-config extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("SIO PORT MAP:\nSIO1.portA = WEBTTY UART0  \nSIO1.portB = VIOKBD  \nSIO2.portA = UART1  \nSIO2.portB = MODEM\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("simplify the addition of new character mode devices in future\neg. additional hardware UART; network sockets; additional telnet listeners; new virtual peripherals on the desktop UI")]),this._v(" "),e("li",[this._v("enable the user to assign specific devices to each of the four (4) virtual SIO-2 serial ports")]),this._v(" "),e("li",[this._v("details of configuring the SIO port mappings will be published later")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"modem-initialization-string"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#modem-initialization-string"}},[this._v("#")]),this._v(" Modem initialization string")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("This string will be processed by the 'AT' Modem when it is initialised and reset (ie. with the command "),e("code",[this._v("ATZ")]),this._v(")")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",[i("li",[t._v("auto-answer after 1 ring ("),i("code",[t._v("ATS0=1")]),t._v(")")]),t._v(" "),i("li",[t._v("enable telnet protocol ("),i("code",[t._v("ATS15=1")]),t._v(")")]),t._v(" "),i("li",[t._v('enable answer mode (ie. listen) in "daemon" mode ('),i("code",[t._v("AT&A1")]),t._v(")")]),t._v(" "),i("li",[t._v("with the commands concatenated into a single command string "),i("code",[t._v("ATS0=1S15=1&A1")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-conf extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("#Modem initialization string\nMODEM.init=ATS0=1S15=1&A1\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"system-conf-file"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#system-conf-file"}},[this._v("#")]),this._v(" System.conf file")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The "),e("strong",[this._v("system.conf")]),this._v(" file is located on the microSD card with the path "),e("code",[this._v("/imsai/conf/system.conf")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"warning custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("WARNING")]),this._v(" "),e("p",[this._v("Some settings in this file are legacy, maintained for source code compatibility with the "),e("em",[this._v("Z80PACK, imsaisim")]),this._v(" machine. Only the parameters documented here have any effect on the "),e("strong",[this._v("IMSAI8080esp")]),this._v(".")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"sio-flags"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#sio-flags"}},[this._v("#")]),this._v(" SIO flags")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The "),e("strong",[this._v("SIO flags")]),this._v(" affect the behavior of the the four "),e("em",[this._v("virtual")]),this._v(" SIO serial ports that are (by default) mapped to "),e("em",[this._v("physical")]),this._v(" UARTs on the ESP32.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("These four "),e("em",[this._v("virtual")]),this._v(" serial ports can:")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",[i("li",[t._v("force upper case")]),t._v(" "),i("li",[t._v("strip the parity bit (the MSB in each character byte) - the default for the CP/M console (SIO1)")]),t._v(" "),i("li",[t._v("drop nulls")]),t._v(" "),i("li",[t._v("set a "),i("em",[t._v("virtual")]),t._v(" baud rate (independent of the "),i("em",[t._v("physical")]),t._v(" UARTs baudrate - the lower rate will determine the actual speed)")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",[t._v("The functions are "),i("strong",[t._v("enabled")]),t._v(" by setting the flag value to "),i("strong",[t._v("1")]),t._v(" or "),i("strong",[t._v("disabled")]),t._v(" with a value of "),i("strong",[t._v("0")]),t._v(" (zero - the default)")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("If the "),e("em",[this._v("virtual")]),this._v(" baud rate is set to 0 (zero) then no rate limit is applied by the "),e("em",[this._v("virtual")]),this._v(" SIO serial port")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-config extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("# SIO 1 Channel A, Ports 2/3 connected to terminal UART0/RS232-1/USB (default)\nsio1a_upper_case\t0\nsio1a_strip_parity\t0\nsio1a_drop_nulls\t1\nsio1a_baud_rate\t\t115200 \n# typical baud rate values are 110, 300, 1200, 2400, 4800, 9600,\n# 19200, 38400, 57600, 115200 - 0 = unlimited baud rate\n\n# SIO 1 Channel B, Ports 4/5 connected to VIO keyboard\nsio1b_upper_case\t0\nsio1b_strip_parity\t0\nsio1b_drop_nulls\t0\nsio1b_baud_rate\t\t1200 \n\n# SIO 2 Channel A, Ports 34/35 connected to UART1/RS232-2 (default)\n# use 8bit here, so that serial file transfers work\nsio2a_upper_case\t0\nsio2a_strip_parity\t0\nsio2a_drop_nulls\t0\nsio2a_baud_rate\t\t9600 \n# typical baud rate values are 110, 300, 1200, 2400, 4800, 9600,\n# 19200, 38400, 57600, 115200 - 0 = unlimited baud rate\n\n# SIO 2 Channel B, ports 36/37 connected to 'AT' telnet modem (default)\n# use 8bit here, so that serial file transfers work\nsio2b_upper_case\t0\nsio2b_strip_parity\t0\nsio2b_drop_nulls\t0\nsio2b_baud_rate\t\t2400 \n")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tip custom-block"},[i("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),i("p",[t._v("If you require "),i("strong",[t._v("8-bit clean")]),t._v(" communications, for example: if using protocols like "),i("em",[t._v("xmodem")]),t._v(", then all of "),i("strong",[t._v("upper case")]),t._v(", "),i("strong",[t._v("strip the parity bit")]),t._v(" and "),i("strong",[t._v("drop_nulls")]),t._v(" should be "),i("strong",[t._v("disabled")])]),t._v(" "),i("p",[t._v("eg.")]),t._v(" "),i("div",{staticClass:"language-config extra-class"},[i("pre",{pre:!0,attrs:{class:"language-text"}},[i("code",[t._v("sio1a_upper_case\t\t0\nsio1a_strip_parity\t\t0\nsio1a_drop_nulls\t\t0\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"memory-maps"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#memory-maps"}},[this._v("#")]),this._v(" Memory maps")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The only other parameters that effect the "),e("strong",[this._v("IMSAI 8080esp")]),this._v(" are the "),e("code",[this._v("[MEMORY n]")]),this._v(" sections:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-conf extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("# <><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><>\n# memory configurations in pages a 256 bytes\n#       start,size (numbers in decimal, hexadecimal, octal)\n# up to 7 memory sections allowed\n# up to 6 ram/rom statements per section allowed\n# <><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><>\n\n[MEMORY 1]\n# Default memory configuration used in most situations with MPU-A ROM:\n# 256 pages RAM, 8 pages ROM (replaces or overlays RAM)\nram         0,256\nrom         0xd8,8,mpu-a-rom.hex\n# Start address of the boot ROM\nboot        0xd800\n\n[MEMORY 2]\n# Memory configuration for running MPU-A ROM and VIO ROM:\n# 240 pages RAM, 8 pages ROM (replaces or overlays RAM)\n# 8 pages of RAM and 8 pages of ROM for the VIO from 0xf000\nram         0,0xf0\nrom         0xd8,8,mpu-a-rom.hex\nram         0xf0,8\nrom         0xf8,8,viofm1.hex\n# Start address of the boot ROM\nboot        0xd800\n\n[MEMORY 3]\n# Memory configuration for running with MEMON80 ROM:\n# 248 pages RAM, 8 pages ROM\nram         0,0xf8\nrom         0xf8,8,memon80.hex\n# Start address of the boot ROM\nboot        0xf800\n\n[MEMORY 4]\n# Memory configuration for running ROM based XYBASIC:\n# 16K ROM, 48K RAM\nrom         0,64,xybasic.hex\nram         64,192\n# Start address of the boot ROM\nboot        0x0000\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("TIP")]),this._v(" "),e("p",[this._v("A memory map is selected by setting the NVS_MEMORY_MAP bits in the "),e("a",{attrs:{href:"#startup-configuration-non-volatile-storage-nvs"}},[this._v("Startup configuration, NVS")]),this._v(" for details.")])])}],o=i(0),a=Object(o.a)({},(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content"},[t._m(0),t._v(" "),i("div",{staticClass:"tip custom-block"},[i("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),t._m(1),t._v(" "),i("p",[t._v("If you are still running and older firmware revision "),i("code",[t._v("v1.9.1")]),t._v(" or earlier, the previous version of the "),i("strong",[t._v("Configuration Guide")]),t._v(" is available "),i("router-link",{attrs:{to:"./old_version_prior_v1.10.0/"}},[t._v("here")])],1)]),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),i("p",[t._v("In order to run any applications, you will need to activate a virtual ROM (eg. to run BASIC, or boot a floppy disk) and maybe load an operating system (such as CP/M) from a virtual disk.")]),t._v(" "),i("p",[t._v("Also like the original computer, your IMSAI 8080esp has no video output port. Owners of the original IMSAI 8080 would connect a serial terminal (either a teletype printer or visual display unit) to a serial port. While you can still do this (see "),i("a",{attrs:{href:"http://localhost:8080/imsai8080/configure/#serial-communications-rs232-usb",target:"_blank",rel:"noopener noreferrer"}},[t._v("Serial Communications"),i("OutboundLink")],1),t._v(" section), this modern kit offers a much easier solution using Wi-Fi.")]),t._v(" "),i("p",[t._v("Once power is applied to your kit, the ESP32 will create a Wi-Fi Access Point. You can connect your computer to this Wi-Fi network as if it were connected to a Wi-FI router. You can then open a web page, the Desktop UI, that will give you full access to the IMSAI 8080esp - including a virtual serial terminal (TTY:), floppy disks, printer (LPT:) and more.")]),t._v(" "),i("p",[t._v("Once connected, you can then configure the IMSAI 8080esp to connect directly to your home Wi-Fi, so you can use it without having to change your Wi-FI settings again.")]),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),i("p",[t._v("Your computer should now be connected, and you will be able to open the Desktop UI. The web interface has been written and tested with the Chrome browser in mind, and you might find it works differently if you are using a different browser.")]),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),t._m(10),t._v(" "),t._m(11),t._v(" "),t._m(12),t._v(" "),t._m(13),t._v(" "),t._m(14),t._v(" "),i("p",[t._v("The startup configuration is modified via the toggle switches on the front panel.")]),t._v(" "),t._m(15),t._v(" "),t._m(16),t._v(" "),t._m(17),t._v(" "),t._m(18),t._v(" "),t._m(19),t._v(" "),t._m(20),t._v(" "),t._m(21),t._v(" "),t._m(22),t._v(" "),t._m(23),t._v(" "),t._m(24),t._v(" "),i("p",[t._v("To set the startup configuration mode value, follow the sequence:")]),t._v(" "),t._m(25),t._v(" "),t._m(26),t._v(" "),t._m(27),t._v(" "),t._m(28),t._v(" "),t._m(29),t._v(" "),i("p",[t._v("Each SIO board provides two serial I/O ports. The board/port/devices are assigned as follows:")]),t._v(" "),t._m(30),t._v(" "),t._m(31),t._v(" "),t._m(32),t._v(" "),t._m(33),t._v(" "),i("div",{staticClass:"warning custom-block"},[i("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),i("p",[t._v("Behavior of serial communications is further effected by the settings on the "),i("em",[t._v("virtual")]),t._v(" "),i("strong",[t._v("SIO")]),t._v(" UARTs (SIO1 and SIO2). See "),i("router-link",{attrs:{to:"./#sio-flags"}},[t._v("SIO flags")]),t._v(" in the "),i("code",[t._v("system.conf")]),t._v(" file below, for further details.")],1)]),t._v(" "),t._m(34),t._v(" "),t._m(35),t._v(" "),t._m(36),t._v(" "),t._m(37),t._v(" "),i("div",{staticClass:"tip custom-block"},[i("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),t._m(38),t._v(" "),i("p",[t._v("Drivers are available direct from the manufacturer at "),i("a",{attrs:{href:"https://www.silabs.com/products/development-tools/software/usb-to-uart-bridge-vcp-drivers",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.silabs.com/products/development-tools/software/usb-to-uart-bridge-vcp-drivers"),i("OutboundLink")],1)])]),t._v(" "),i("p",[t._v("Additional information is available from the Espressif (manufacturer of the "),i("code",[t._v("ESP32-PICO-KIT")]),t._v(") web site at "),i("a",{attrs:{href:"https://docs.espressif.com/projects/esp-idf/en/latest/get-started/establish-serial-connection.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://docs.espressif.com/projects/esp-idf/en/latest/get-started/establish-serial-connection.html"),i("OutboundLink")],1)]),t._v(" "),t._m(39),t._v(" "),t._m(40),t._v(" "),t._m(41),t._v(" "),i("p",[t._v("RS232 line levels are provided by the Maxim MAX3232 IC see the "),i("a",{attrs:{href:"https://datasheets.maximintegrated.com/en/ds/MAX3222-MAX3241.pdf",target:"_blank",rel:"noopener noreferrer"}},[t._v("data sheet"),i("OutboundLink")],1),t._v(" for details.")]),t._v(" "),t._m(42),t._v(" "),t._m(43),t._v(" "),t._m(44),t._v(" "),t._m(45),t._v(" "),t._m(46),t._v(" "),t._m(47),t._v(" "),t._m(48),t._v(" "),t._m(49),t._v(" "),t._m(50),t._v(" "),t._m(51),t._v(" "),t._m(52),t._v(" "),t._m(53),t._v(" "),t._m(54),t._v(" "),t._m(55),t._v(" "),i("p",[t._v("See "),i("router-link",{attrs:{to:"./#uart-configuration"}},[t._v("UART Configuration")]),t._v(" in the "),i("code",[t._v("boot.conf")]),t._v(" file below, for further details.")],1),t._v(" "),t._m(56),t._v(" "),t._m(57),t._v(" "),t._m(58),t._v(" "),t._m(59),t._v(" "),t._m(60),t._v(" "),t._m(61),t._v(" "),t._m(62),t._v(" "),t._m(63),t._v(" "),t._m(64),t._v(" "),t._m(65),t._v(" "),i("p",[t._v("The default configuration, as shipped (in Release v1.10.0) is a follows:")]),t._v(" "),t._m(66),t._m(67),t._v(" "),t._m(68),t._v(" "),i("div",{staticClass:"tip custom-block"},[i("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),t._m(69),t._v(" "),i("p",[t._v("A file with TZ variable values for many timezones can be found at "),i("a",{attrs:{href:"https://www.di-mgt.com.au/src/wclocktz.ini",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.di-mgt.com.au/src/wclocktz.ini"),i("OutboundLink")],1),t._v(" "),i("a",{attrs:{href:"https://groups.google.com/d/msg/imsai8080esp/PdNyxAOeBhU/7_IgKXXbCAAJ",target:"_blank",rel:"noopener noreferrer"}},[t._v("Credit to: John Mann in the Forum"),i("OutboundLink")],1)]),t._v(" "),i("p",[t._v("An article that defines the POSIX format can be found at "),i("a",{attrs:{href:"https://www.gnu.org/software/libc/manual/html_node/TZ-Variable.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Specifying the Time Zone with TZ"),i("OutboundLink")],1),t._v(', however please note, the "third format" referenced in this article is the Olson format, and not supported on the ESP32.')])]),t._v(" "),t._m(70),t._v(" "),t._m(71),t._v(" "),i("p",[t._v("For example:")]),t._v(" "),t._m(72),t._m(73),t._v(" "),t._m(74),t._v(" "),t._m(75),t._v(" "),i("p",[t._v("They specify a time in milliseconds (ms) during which output to the device will be buffered (up to the next line feed character) and transmitted in a single (websocket) packet. This can greatly improve performance of both the TTY: and LPT: devices. If used, recommended optimal settings are:")]),t._v(" "),t._m(76),t._m(77),t._v(" "),i("p",[t._v("A harddisk image (4MB) can be mounted as I:DSK: / Drive I:")]),t._v(" "),t._m(78),t._v(" "),t._m(79),t._v(" "),t._m(80),t._v(" "),t._m(81),i("p",[t._v("e.g.")]),t._v(" "),t._m(82),t._m(83),t._v(" "),t._m(84),t._v(" "),i("p",[t._v("The harddisk cannot be made a bootable device, the bootrom doesn't support this. A CP/M system floppy disk image is still required in drive A: to boot CP/M")]),t._v(" "),t._m(85),t._v(" "),t._m(86),t._v(" "),i("p",[t._v("A HAL (Hardware Abstraction Layer) enables mapping of character mode devices to the four (4) virtual SIO-2 serial ports")]),t._v(" "),t._m(87),t._v(" "),t._m(88),i("p",[t._v("the purpose of the HAL is to:")]),t._v(" "),t._m(89),t._v(" "),t._m(90),t._v(" "),t._m(91),t._v(" "),i("p",[t._v("For example, to initialize the modem for:")]),t._v(" "),t._m(92),t._v(" "),i("p",[t._v("add the following line:")]),t._v(" "),t._m(93),t._m(94),t._v(" "),t._m(95),t._v(" "),t._m(96),t._v(" "),t._m(97),t._v(" "),t._m(98),t._v(" "),t._m(99),t._v(" "),t._m(100),t._v(" "),t._m(101),t._v(" "),t._m(102),t._v(" "),i("p",[t._v("For example:")]),t._v(" "),t._m(103),t._m(104),t._v(" "),t._m(105),t._v(" "),t._m(106),t._v(" "),t._m(107),t._m(108)])}),s,!1,null,null,null);e.default=a.exports}}]);